<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>æ´¥æ³¢é¿é›£ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</title>
  <style>
    :root{
      /* JSã§å®Ÿæ¸¬ã—ã¦æ›´æ–°ã™ã‚‹ãŒã€åˆæœŸå€¤ã‚‚å…¥ã‚Œã¦ãŠã */
      --header-h: 64px;
      --footer-h: 24px; /* ä¸‹æ®µfooterã®é«˜ã• */
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", Meiryo, Arial, sans-serif;
      color: #111;
    }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆé’å¸¯ï¼‰â€” ç”»é¢ä¸Šéƒ¨ã«å›ºå®š */
    header#app-header {
      background-color: #00bfff;
      color: #fff;
      padding: 6px 16px;
      text-align: center;
      position: fixed;   /* â† å›ºå®š */
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;     /* åœ°å›³ã‚„å¹ãå‡ºã—ã‚ˆã‚Šå‰é¢ã« */
    }
    header#app-header h1 {
      font-size: 1.1em;
      margin: 0;
      font-weight: 700;
      letter-spacing: .5px;
    }
    header#app-header .subtext {
      font-size: 0.75em;
      margin-top: 2px;
      color: #f0f8ff;
    }
    /* ãƒ˜ãƒƒãƒ€ãƒ¼å³ä¸Šã®è¨€èªãƒˆã‚°ãƒ« */
    .header-actions{
      position:absolute;
      right:12px;
      top:50%;
      transform:translateY(-50%);
      display:flex;
      gap:8px;
    }
    #lang-toggle{
      background:#eee; color:#333;
      border:1px solid #ccc; border-radius:8px;
      padding:6px 12px; font-weight:600; font-size:14px;
      line-height:1; cursor:pointer; transition:filter .15s;
    }
    #lang-toggle:hover{ filter:brightness(0.96); }
    #lang-toggle:focus-visible{ outline:2px solid #333; outline-offset:2px; }

    /* å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼šãƒ˜ãƒƒãƒ€ãƒ¼åˆ†ã®ä½™ç™½ã‚’ä¸Šã«ç¢ºä¿ */
    .container {
      height: 100vh;
      padding-top: var(--header-h);  /* â† ãƒ˜ãƒƒãƒ€ãƒ¼é«˜ã•ã¶ã‚“ä¸‹ã’ã‚‹ */
      display: flex;
      flex-direction: column;
    }
    .map-area { flex-grow: 1; position: relative; }
    #map { position: absolute; inset: 0; }

/* ä¸Šæ®µãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆinfo-areaï¼‰â€” ã¯ã¿å‡ºã—æ ¹çµ¶ */
.info-area {
  position: fixed;
  left: 0;
  right: 0; /* â† 100vwã‚’ä½¿ã‚ãšå·¦å³0ã§å›ºå®š */
  bottom: var(--footer-h, 24px);
  box-sizing: border-box;
  background-color: #e0e0e0;
  /* ç«¯æœ«ã®å®‰å…¨åŸŸã‚‚è¾¼ã¿ã§ã‚¤ãƒ³ã‚»ãƒƒãƒˆã€‚paddingã¯å†…å´ã§ç¢ºä¿ */
  padding: 8px 12px;
  font-size: 0.85em;
  z-index: 900;
  box-shadow: 0 0 10px rgba(0,0,0,.3);
}

/* å³ç«¯ã®è¦‹åˆ‡ã‚Œã‚’é˜²ããŸã‚ã®å†…å´ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆä»»æ„ã ãŒæ¨å¥¨ï¼‰ */
.info-area .inner {
  max-width: 960px;          /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§åºƒãŒã‚Šéããªã„ */
  margin: 0 auto;            /* ä¸­å¤®å¯„ã› */
  padding-right: max(12px, env(safe-area-inset-right)); /* iOSå®‰å…¨åŸŸå¯¾ç­– */
  padding-left:  max(12px, env(safe-area-inset-left));
}

/* ãƒœã‚¿ãƒ³è¡Œï¼š2ç­‰åˆ†ã€‚minmax(0,1fr) ã§å­è¦ç´ ã®æœ€å°å¹…ã‚’0ã«å›ºå®šã—æº¢ã‚Œé˜²æ­¢ */
.button-row {
  display: grid; 
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* â† ã“ã‚ŒãŒåŠ¹ãã¾ã™ */
  gap: 10px;
  margin-top: 8px;
}

/* ãƒœã‚¿ãƒ³ï¼šå¿…ãšè¦ªã®ä¸­ã«åã‚ã‚‹ï¼ˆé•·ã„æ—¥æœ¬èª/è‹±èªã§ã‚‚OKï¼‰ */
.button-row button {
  width: 100%;
  min-width: 0;               /* â† min-contentã«ã‚ˆã‚‹ã¯ã¿å‡ºã—ã‚’ç„¡åŠ¹åŒ– */
  white-space: normal;        /* æŠ˜ã‚Šè¿”ã—è¨±å¯ */
  overflow-wrap: anywhere;    /* ã‚¹ãƒšãƒ¼ã‚¹ç„¡ã—ã§ã‚‚ã©ã“ã§ã‚‚æŠ˜ã‚Šè¿”ã™ */
  line-height: 1.25;
  font-size: 0.95em;
  padding: 10px 10px;
  border: none;
  border-radius: 6px;
  color: #fff;
  cursor: pointer;
  transition: filter .15s, background .15s;
}

/* ã”ãç‹­ã„å¹…ã§ã¯1åˆ—ã«ç©ã‚€ */
@media (max-width: 380px) {
  .button-row { grid-template-columns: 1fr; }
}
    button.use-location { background-color: #007bff; }
    button.use-location:hover { filter:brightness(0.95); }
    button.launch-gmap { background-color: #28a745; }
    button.launch-gmap:hover { filter:brightness(0.95); }

    /* ä¸‹æ®µ footerï¼ˆä½œæˆè€…è¡¨ç¤ºï¼‰ */
    footer {
      background-color: #fff;
      color: gray;
      text-align: center;
      padding: 3px;
      font-size: 0.6em;
      position: fixed;
      width: 100%;
      bottom: 0;
      z-index: 800;
      height: var(--footer-h);      /* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨ˆç®—ç”¨ */
      box-sizing: border-box;
    }

    @media (max-width: 768px) {
      header#app-header h1 { font-size: 1em; }
      header#app-header .subtext { font-size: 0.7em; }
      .info-area { font-size: 0.85em; padding: 8px 12px; width: 100vw; }
      .button-row { gap: 6px; }
    }
  </style>
</head>
<body>
  <!-- å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header id="app-header">
    <h1 data-i18n="header_title">æ´¥æ³¢é¿é›£ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h1>
    <p class="subtext" data-i18n="header_subtext">ğŸ“ åœ°å›³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨é¿é›£çµŒè·¯ã‚’è¡¨ç¤ºã—ã¾ã™</p>
    <div class="header-actions">
      <button id="lang-toggle" type="button" aria-label="Switch language">EN</button>
    </div>
  </header>

  <div class="container">
    <div class="map-area">
      <div id="map" role="application" aria-label="map"></div>
    </div>

    <!-- ä¸Šæ®µãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆinfo-areaï¼‰ -->
    <div class="info-area">
      <div class="inner"><!-- â† è¿½åŠ  -->
        <h2 data-i18n="info_title">æœ€çŸ­ã®é¿é›£å…ˆï¼š</h2>
        <p id="nearest-destination" data-i18n="info_hint">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„</p>
        <div class="button-row">
          <button class="use-location" onclick="useCurrentLocation()" data-i18n="btn_use_current">
            ç¾åœ¨åœ°ã‹ã‚‰é¿é›£
          </button>
          <button class="launch-gmap" onclick="launchGoogleMap()" data-i18n="btn_open_gmaps">
            Googleãƒãƒƒãƒ—ã§é–‹ã
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ä¸‹æ®µfooterï¼ˆä½œæˆè€…ï¼‰ -->
  <footer>éƒ½å¸‚åœ°åŸŸãƒ‡ã‚¶ã‚¤ãƒ³å­¦ç ”ç©¶å®¤</footer>

  <!-- ã‚¢ãƒ—ãƒªæœ¬ä½“ -->
  <script src="./map_eva.js"></script>

  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼é«˜ã•ã‚’å®Ÿæ¸¬ã—ã€CSSå¤‰æ•°ã‚’æ›´æ–°ï¼ˆå¯å¤‰è¡Œé«˜ã«å¯¾å¿œï¼‰ -->
  <script>
    function updateHeaderHeightVar(){
      const h = document.getElementById('app-header')?.offsetHeight || 64;
      document.documentElement.style.setProperty('--header-h', h + 'px');
    }
    window.addEventListener('load', updateHeaderHeightVar);
    window.addEventListener('resize', updateHeaderHeightVar);
  </script>

  <!-- Google Mapsï¼ˆAPIã‚­ãƒ¼å·®ã—æ›¿ãˆï¼‰-->
    <script async defer 
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHARZBVr3rzCr_ejyqvMVxoU-V9VfKnfw&language=ja&callback=initMap">
    </script>
</body>
</html>